<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width,minimum-scale=1,maximum-scale=1" />
    <title>Mobile Futon</title>
    <link rel="stylesheet" href="css/main.css">

  </head>

  <body>

    <header>
      <a href="#" class="home plain_btn"><img src="./img/favicon.png" /></a>
      <h1 id="title">CouchDB</h1>
      <div id="user" class="plain_btn"> </div>
    </header>

    <div id="content"></div>

    <script type="text/html" id="home_tpl">
      <div class="info">
        <p><strong>Version:</strong><br />{{version}}</p>
        <p><strong>Current Host</strong><br />http://{{ip}}:{{port}}/</p>
      </div>
      <ul>
        <li><a href="#/databases/" class="button">Databases</a></li>
        <li><a href="#/replication/" class="button">Replication</a></li>
        <li><a href="#/tasks/" class="button">Active Tasks</a></li>
        <li><a href="#/couchapps/" class="button">CouchApps</a></li>
        <li><a href="#/config/" class="button">Config</a></li>
      </ul>

      {{#adminparty}}
      <p class="adminparty">
        You are currently in Admin Party!
      </p>{{/adminparty}}

    </script>

    <script type="text/html" id="config_tpl">
      <form action="#config" id="config">
        {{{config}}}
        <div style="padding:10px;">
          <input type="submit" value="Save Config" id="saveconfig" />
        </div>
      </form>
    </script>

    <script type="text/html" id="tasks_tpl">
      <ul id="tasks">
        {{#tasks}}
        <li>
          <table>
            <tr><td class="label">Pid:</td><td>{{pid}}</td></tr>
            <tr><td class="label">Type:</td><td>{{type}}</td></tr>
            <tr><td class="label">Task:</td><td>{{task}}</td></tr>
            <tr><td class="label">Status:</td><td>{{status}}</td></tr>
          </table>
        </li>
        {{/tasks}}
        {{^tasks}}<li class="none">No Tasks</li>{{/tasks}}
      </ul>
    </script>

    <script type="text/html" id="couchapps_tpl">
      <ul>
        {{#couchapps}}
        <li><a href="{{url}}" class="button">{{name}}</a></li>
        {{/couchapps}}
      </ul>
    </script>

    <script type="text/html" id="document_tpl">

      <div id="document"><pre><code>{{json}}</code></pre></div>
    </script>

    <script type="text/html" id="database_tpl">
      <div class="selectwrapper">
        <select name="source" id="views_select">
          <option value="_all_docs">All Documents</option>
          <option value="_design_docs">Design Documents</option>
          {{#views}}
          <option value="{{ddoc}}-{{name}}">{{id}}/{{name}}</option>
          {{/views}}
        </select>
      </div>
      <p style="text-align:center;margin:10px;">
        {{start}} to {{end}} of {{total_rows}}
      </p>
      <ul>
        {{#rows}}
        <li><a href="#/databases/{{database}}/{{id}}" class="button">{{id}}</a></li>
        {{/rows}}
      </ul>
    </script>

    <script type="text/html" id="databases_tpl">

      <ul id="db_list">
        {{#databases}}
        <li><a href="#/databases/{{url}}/" class="button">{{name}}</a></li>
        {{/databases}}
      </ul>
    </script>

    <script type="text/html" id="unauthorized_tpl">
      <div id="unauthorized">
        <h1>!</h1>
        You need to be logged in as an admin to access this page.
      </div>
    </script>

    <script type="text/html" id="replication_tpl">

      <ul id="running">
        <li class="header">Running Replications</li>
      </ul>

      <form action="#replication">
        <ul>
          <li class="header">Create Replication</li>
          <li>
            <div class="selectwrapper">
              From:
              <select name="source" id="source_select">
                {{#databases}}
                <option value="{{.}}">{{.}}</option>
                {{/databases}}
              </select>
              <input type="text" name="custom_source" id="custom_source"
                     placeholder="or enter a url" />
            </div>
            <div class="selectwrapper">
              To:
              <select name="target" id="target_select">
                {{#databases}}
                <option value="{{.}}">{{.}}</option>
                {{/databases}}
              </select>
              <input type="text" name="custom_target" id="custom_target"
                     placeholder="or enter a url"  />
            </div>

            <label for="continuous">
              <input type="checkbox" id="continuous" name="continuous" /> Continuous
            </label>
          </li>
        </ul>
        <div style="padding:10px;">
          <input type="submit" value="replicate" />
        </div>
      </form>

      <ul id="stored">
        <li class="header">Previous Replications</li>
        {{#replications}}
        <li data-source="{{source}}" data-target="{{target}}"
            data-continuous="{{continuous}}" class="repl">
          <a class="replication">{{source}} =&gt; {{target}}</a>
          <button class="delete">delete</button>
        </li>
        {{/replications}}
        {{^replications}}
        <li class="none">No Stored Replications</li>
        {{/replications}}
      </ul>

    </script>

    <script type="text/html" id="replication_items">
      {{#running}}
      <li data-source="{{source}}" data-target="{{target}}"
          data-continuous="{{continuous}}" data-create_target="{{create_target}}"
          class="repl">
        <a class="replication">{{{source}} -> {{target}}</a>
        {{#cancellable}}
        <button class="cancel">cancel</button>
        {{/cancellable}}
      </li>
      {{/running}}
      {{^running}}
      <li class="none">No Running Replications</li>
      {{/running}}

    </script>

    <script type="text/html" id="logged_out_btn">
      <a href="#/account/">login</a>
    </script>

    <script type="text/html" id="logged_in_btn">
      <a href="#/account/">{{name}}</a>
    </script>

    <script type="text/html" id="logged_out">
      <ul>
        <li>
          <form action="#login">
            <div class="selectwrapper">
              <input type="text" id="username" name="username"
                     placeholder="username" />
            </div>
            <div class="selectwrapper">
              <input type="password" id="password" name="password"
                     placeholder="password" />
            </div>
            <label for="register">
              <input type="checkbox" id="register" name="register" /> Register
            </label>
            <div class="selectwrapper">
              <input type="submit" value="Submit" />
            </div>
          </form>
          </li>
      </ul>
    </script>

    <script type="text/html" id="logged_in">
      <form action="#logout">
        <ul>
          <li class="header">User Information</li>
          <li><div class="selectwrapper">name: {{name}}</div></li>
          <li><div class="selectwrapper">roles: {{roles}}</div></li>
        </ul>
        <div class="selectwrapper">
          <input type="submit" value="logout" />
        </div>
      </form>
    </script>

  </body>

  <script src="/_utils/script/sha1.js"></script>
  <script src="./jquery-1.6.min.js"></script>
  <script src="./js/jquery.couch.js"></script>
  <script src="./js/modernizr-1.7.min.js"></script>
  <script src="./js/mustache.js  "></script>
  <script src="./js/router.js"></script>
  <script src="./js/renderer.js"></script>
  <script src="./js/utils.js"></script>
  <script src="./js/mobile.futon.js"></script>

</html>
